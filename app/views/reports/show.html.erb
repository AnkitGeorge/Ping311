<div id="show-map" data-latitude="<%= @report.latitude %>" data-longitude="<%= @report.longitude %>"></div>
<br>
<br>
<div id="show_img"><%= image_tag(@report.image) %></div>
<h2><%= @report.address %></h2>
<br>
<h4><%= @report.description %></h4>
<br>
<h4>Status: <%= statusName(@report.status) %></h4>
<br>
<h4>Other pothole reports near this location</h4>
      <% @nearbyholes.each do |h| %>
        <li>
          <p><%= h.address %></p>
          <p>&nbsp;&nbsp;&nbsp;Status: <%= statusName(h.status) %></p>
          <p>&nbsp;&nbsp;&nbsp;<%= (h.distance_to(@report, :km)*1000).to_i %> metres away.</p>
        </li>
        <br>
      <% end %>
 <!-- Button to subscribe -->
 <%= form_for @subscription do |f| %>
   <%= f.hidden_field :report_id %>
   <%= f.submit "Subscribe" %>
 <% end %>

 <h2>Subscriptions</h2>
   <p> Subscriptions so far: <%= @report.subscriptions.count %></p>
   <% @report.vote_count = @report.votes.count %>
   <% @report.subscription_count = @report.subscriptions.count %>


  <!-- Button to vote -->
  <%= form_for @vote do |f| %>
    <%= f.hidden_field :report_id %>
    <%= f.submit "Submit Vote" %>
  <% end %>
  <!-- Votes -->
  <h2>Votes</h2>
    <p> Votes so far: <%= @report.votes.count %></p>

  <!-- Comments -->

  <% if @report.comments.any? %>
  <h3>Comments</h3>
   <% @report.comments.each do |comment| %>
      <p> <%= comment.user.username %> says: <%= comment.body_text %> </p>
     <% end %>
   <% else %>
     <p> No Comments Posted</p>
 <%end %>

 <%= render partial: 'comments/form' %>

 <%= javascript_tag do %>
   window.nearbys = <%= raw @nearbyholes.map{|nr| { lat: nr.latitude, lng: nr.longitude } }.to_json %>
 <% end %>
